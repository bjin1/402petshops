<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PetShops</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/global.css" rel="stylesheet">
    <script src="./js/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/layer.js"></script>
    <script src="./js/vue.min.js"></script>
    <script src="./js/vue-resource.min.js"></script>
    <script src="./js/config.js"></script>
    <style>
        .carousel .item {
            height: 450px;
            background-color: #777;
        }

        .carousel-inner > .item > img {
            position: absolute;
            top: 0;
            left: 0;
            min-width: 100%;
            height: 450px;
        }

        .table {
            margin-bottom: 0px;
        }
    </style>
</head>
<body>
<div class="container" id="app">
    <div class="row background-wall">
        <div class="row header">
            <div class="col-md-12 login-button">
                <a href="./login.html" v-show="!isLogin">
                    <button type="button" class="btn btn-success">Login</button>
                </a>
                <a href="./register.html" v-show="!isLogin">
                    <button type="button" class="btn btn-success">Register</button>
                </a>
                <a v-show="isLogin" style="color:black;">Welcome,{{ user.name }}</a>
                <a v-show="isLogin" @click="logout">Logout</a>
            </div>
        </div>
        <div class="row nav-center"></div>
    </div>

    <div class="row nav-bottom">
        <div class="col-md-6 logo-title">
            <a href="./index.html"><img src="./images/logo.jpg?v=1" width="100" height="100"></a>
            <a href="./index.html"><h1 class="LogoFont">PetShops</h1></a>
        </div>
        <div class="col-md-6 navbar-right">
            <ul class="nav navbar-nav">
                <li class="active"><a href="./index.html">Home</a></li>
                <li><a href="./approve.html">Approve</a></li>
                <li><a href="./mine.html">Mine</a></li>
                <li><a @click="chatRoom">Message</a></li>
            </ul>
        </div>
    </div>

    <!--    <div class="row nav-bottom-res">-->
    <!--        <hr>-->
    <!--        <div class="col-md-6 logo-title">-->
    <!--            <h1>{{ data.title }}</h1>-->
    <!--            <p>{{ data.oname }}</p>-->
    <!--        </div>-->
    <!--        <div class="col-md-6 navbar-right-tel">-->
    <!--            <div class="row"><h4>Phone: 050-3816-1823</h4></div>-->
    <!--            <div class="row">(+81-50-3816-1823)</div>-->
    <!--        </div>-->
    <!--    </div>-->

    <!--    <div class="row nav-image">-->
    <!--        <div id="myCarousel" class="carousel slide">-->
    <!--            <ol class="carousel-indicators">-->
    <!--                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>-->
    <!--                <li data-target="#myCarousel" data-slide-to="1"></li>-->
    <!--                <li data-target="#myCarousel" data-slide-to="2"></li>-->
    <!--            </ol>-->

    <!--            <div class="carousel-inner">-->
    <!--                <div class="item" v-for="item in data.images.split(',')">-->
    <!--                    <img :src="''+item" width="100%">-->
    <!--                </div>-->
    <!--            </div>-->

    <!--            <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">-->
    <!--                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>-->
    <!--                <span class="sr-only">Previous</span>-->
    <!--            </a>-->
    <!--            <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">-->
    <!--                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>-->
    <!--                <span class="sr-only">Next</span>-->
    <!--            </a>-->
    <!--        </div>-->
    <!--    </div>-->

    <div class="row nav-bottom-res-box">
        <hr style="border-bottom: 2px;">
        <div class="col-md-6 logo-title">
            <h1>{{ data.title }}</h1>
            <p>
                <svg t="1607919637317" style="position:relative; top:6px;" class="icon" viewBox="0 0 1024 1024"
                     version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1179" width="25" height="25">
                    <path d="M512 597.333333c94.122667 0 170.666667-76.544 170.666667-170.666666s-76.544-170.666667-170.666667-170.666667-170.666667 76.544-170.666667 170.666667 76.544 170.666667 170.666667 170.666666z m0-256c47.061333 0 85.333333 38.272 85.333333 85.333334s-38.272 85.333333-85.333333 85.333333-85.333333-38.272-85.333333-85.333333 38.272-85.333333 85.333333-85.333334z"
                          fill="#dbdbdb" p-id="1180"></path>
                    <path d="M487.253333 930.730667a42.581333 42.581333 0 0 0 49.493334 0C549.717333 921.557333 854.570667 701.44 853.333333 426.666667c0-188.202667-153.130667-341.333333-341.333333-341.333334S170.666667 238.464 170.666667 426.453333c-1.237333 274.986667 303.616 495.104 316.586666 504.277334zM512 170.666667c141.184 0 256 114.816 256 256.213333 0.896 189.354667-187.221333 359.381333-256 415.146667-68.736-55.808-256.896-225.877333-256-415.36 0-141.184 114.816-256 256-256z"
                          fill="#dbdbdb" p-id="1181"></path>
                </svg>
                {{ data.area }}
            </p>
            <p>
                <svg t="1607919976506" style="position:relative; top:6px;" class="icon" viewBox="0 0 1024 1024"
                     version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2678" width="25" height="25">
                    <path d="M832 102.4s-148.48 40.96-281.6 76.8h-51.2c-128-33.28-281.6-76.8-281.6-76.8-56.32 0-102.4 46.08-102.4 102.4v537.6c0 56.32 48.64 84.48 102.4 102.4 0 0 138.24 38.4 281.6 76.8h51.2c143.36-38.4 281.6-76.8 281.6-76.8 53.76-12.8 102.4-46.08 102.4-102.4V204.8c0-56.32-46.08-102.4-102.4-102.4z m-332.8 768l-281.6-76.8c-28.16-7.68-51.2-23.04-51.2-51.2V204.8c0-28.16 23.04-51.2 51.2-51.2l281.6 76.8v640z m384-128c0 28.16-23.04 43.52-51.2 51.2 0 0-138.24 38.4-281.6 76.8V230.4l281.6-76.8c28.16 0 51.2 23.04 51.2 51.2v537.6z"
                          p-id="2679" fill="#cdcdcd"></path>
                </svg>
                {{ data.oname }}
            </p>
        </div>
        <div class="col-md-6 navbar-right-tel">
            <div class="row"><h4>Phone: 050-3816-1823</h4></div>
            <div class="row">(+81-50-3816-1823)</div>
            <br>
            <div class="row">
                <button type="button" style="margin-left: -10px;" @click="buy" class="btn btn-success">
                    <svg style="position:relative; top:3px;" class="icon" t="1607920430602" class="icon"
                         viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3167" width="16"
                         height="16">
                        <path d="M995.265306 989.413878H28.734694a20.897959 20.897959 0 0 1-20.062041-26.644898L84.636735 697.155918a20.897959 20.897959 0 0 1 19.853061-15.15102h20.897959a20.897959 20.897959 0 0 1 0 41.795918h-4.597551L56.42449 947.617959h911.15102l-64.052245-223.817143h-1.358367a20.897959 20.897959 0 0 1 0-41.795918H919.510204a20.897959 20.897959 0 0 1 20.062041 15.15102l76.068571 265.613062a20.897959 20.897959 0 0 1-20.06204 26.644898z"
                              p-id="3168" fill="#ffffff"></path>
                        <path d="M195.918367 839.157551a20.897959 20.897959 0 0 1-20.897959-20.897959v-579.918368a20.897959 20.897959 0 0 1 5.955919-14.524081l177.632653-182.857143a20.897959 20.897959 0 0 1 14.94204-6.373878h459.755102a20.897959 20.897959 0 0 1 20.89796 20.89796l-5.22449 757.55102a20.897959 20.897959 0 0 1-20.897959 20.897959l-632.163266 5.22449z m20.89796-592.352653v550.347755l590.471836-4.91102 4.911021-715.964082H382.432653z"
                              p-id="3169" fill="#ffffff"></path>
                        <path d="M368.326531 269.688163h-156.734694a20.897959 20.897959 0 0 1 0-41.795918h135.836734v-146.285714a20.897959 20.897959 0 1 1 41.795919 0v167.183673a20.897959 20.897959 0 0 1-20.897959 20.897959zM457.142857 510.014694a20.897959 20.897959 0 0 1-14.733061-6.164898l-94.040816-94.040816a20.897959 20.897959 0 0 1 29.570612-29.570613l80.039184 80.039184 194.14204-174.811429a20.897959 20.897959 0 1 1 28.003266 31.346939l-208.979592 188.081633a20.897959 20.897959 0 0 1-14.001633 5.12zM770.612245 708.545306h-512a10.44898 10.44898 0 0 1 0-20.897959h512a10.44898 10.44898 0 0 1 0 20.897959z"
                              p-id="3170" fill="#ffffff"></path>
                    </svg>
                    Buy
                </button>
                <button type="button" style="margin-left: 10px;" @click="chatRoom" class="btn btn-success">
                    <svg style="position:relative; top:3px;" t="1607927914411" class="icon" viewBox="0 0 1025 1024"
                         version="1.1"
                         xmlns="http://www.w3.org/2000/svg" p-id="3183" width="16" height="16">
                        <path d="M512.824885 39.121c-12.944 0-23.188 3.834-30.594 11.67-7.543 7.669-13.38 17.057-17.354 27.728L347.367885 349.82 31.960885 378.135c-7.406 1.419-14.228 4.699-20.344 10.085-6.123 5.42-9.975 12.809-11.253 22.342-1.418 9.388 0.866 18.648 6.558 27.755 5.839 9.088 12.799 17.34 20.898 24.899l11.253 9.533 26.039 22.339c10.67 9.085 22.476 19.199 35.845 30.289l40.259 33.868c32.012 27.009 67.995 57.739 108.262 92.164l-34.706 141.708c-4.833 18.199-9.393 35.982-13.798 53.631-4.403 17.503-8.406 33.56-11.811 48.094-3.416 14.506-6.403 26.87-9.098 37.4l-5.124 19.781c-1.434 5.979-0.709 11.949 1.987 17.643 2.707 5.698 6.971 10.673 12.809 14.646 5.694 4.139 12.224 6.558 19.337 7.695 1.584 0.224 3.154 0.307 4.72 0.307 5.476 0 10.886-1.334 16.204-3.861 3.416-1.444 10.103-4.832 19.922-10.113 9.951-5.39 21.617-12.228 35.276-20.337 13.518-8.116 28.75-16.784 45.396-26.316 16.637-9.389 33.561-18.922 50.485-28.315 39.566-22.197 83.377-47.514 131.754-75.824l266.461 153.792 14.813 5.53c6.394 2.416 11.364 3.555 14.782 3.555 10.254 0 19.351-2.278 27.606-6.529 8.098-4.415 11.245-13.361 9.1-26.896-0.71-2.699-1.985-9.248-3.976-19.781l-7.695-37.814c-3.129-14.954-6.39-31.458-9.668-49.659-3.416-18.223-7.25-36.425-11.241-54.624-8.961-43.263-19.061-91.502-30.716-144.679l211.407-188.228c8.818-10.253 16.074-18.787 21.908-25.897 5.833-7.112 8.682-15.367 8.682-24.759 0-10.085-2.705-17.504-8.116-22.338-5.555-4.7-15.083-8.668-28.592-12.09l-315.546-29.312-114.261-271.3c-1.418-2.697-3.265-5.973-5.684-10.085-2.415-3.974-5.262-8.116-8.684-12.089-3.415-4.137-7.668-7.692-12.652-10.667C525.624885 40.678 519.649885 39.121 512.824885 39.121"
                              p-id="3184" fill="#bfbfbf"></path>
                    </svg>
                    Chat
                </button>
            </div>
        </div>
    </div>

    <div class="row">
        <table class="table">
            <tbody>
            <tr class="success">
                <td>Breed</td>
                <td>{{ data.breed }}</td>
            </tr>
            <tr class="active">
                <td>Descr</td>
                <td>{{ data.descr.slice(0,110) }}</td>
            </tr>
            <tr class="success">
                <td>Price</td>
                <td>${{ data.price }}</td>
            </tr>
            <tr class="active">
                <td>Views</td>
                <td>{{ data.views }}</td>
            </tr>
            <tr class="success">
                <td>Area</td>
                <td>{{ data.area }}</td>
            </tr>
            <tr class="active">
                <td>Delivery</td>
                <td>{{ data.delivery }}</td>
            </tr>
            </tbody>
        </table>

        <div class="row full-desc">
            <div class="col-md-6" style="border-right: 1px solid #e0d8d8;">
                <div class="intro-Left">
                    <h3><span class="api_catch_copy_title">{{ data.title }}</span></h3>
                    <p>
                        <span class="api_catch_copy">{{ data.descr }}</span>
                    </p>
                </div>
            </div>
            <div class="col-md-6 full-icon">
                <div class="intro-Left" style="text-align: center;">
                    <img style="margin-left: -10px;width: 352px;height: 243px;" :src="''+data.cover">
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    new Vue({
        el: '#app',
        data: {
            id: '',
            user: {},
            data: {},
            isLogin: false
        },
        mounted() {
            this.init();
            this.findPetById(this.id);
        },
        methods: {
            init: function () {
                let user = session("get.user");
                if (user) {
                    this.isLogin = true;
                    this.user = JSON.parse(user);
                } else {
                    this.isLogin = false;
                    this.logout();
                }
                this.id = get_url_param("id");
            },
            logout: function () {
                this.isLogin = false;
                window.sessionStorage.clear();
                window.location.href = './login.html'
            },
            findPetById: function () {
                let _this = this;
                Request.get(BASE_URL + '/api/pets.php', {
                    params: {
                        id: this.id,
                    }
                }, {emulateJSON: true}).then(function (res) {
                    // layer.alert(res.body.msg);
                    if (res.body.code === 0) {
                        _this.data = res.body.data;
                    } else {
                        layer.alert("No more data");
                    }
                }, function (res) {
                    console.log(res)
                });
            },
            buy: function () {
                redirect('buy', {"id": this.id, "amount": this.data.price})
            },
            chatRoom: function () {
                layer.open({
                    type: 2
                    , title: 'Chat'
                    , id: 'LAY_showPraise'
                    , shade: 0.8
                    , shadeClose: true
                    , area: ['75%', "100%"]
                    , skin: 'layer-ext-case'
                    , maxmin: true
                    , content: './chat.html?id=' + this.data.uid
                    , cancel: function (res) {
                        console.log(res)
                    }
                })
            }
        }
    })
</script>
</body>
</html>